---
title: "Chagas pathway"
author: "XX"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_document
params:
  num_scenarios: 'NULL'
  fig_diagram_scenarios1: 'NULL'
  # values_box_scenarios1: 'NULL'
  prop_diagnosed_scenarios1: 'NULL' 
  cost_per_true_pos_scenarios1: 'NULL'
  plot_ppv_scenarios1: 'NULL'
  plot_npv_scenarios1: 'NULL'
  plot_cpc_scenarios1: 'NULL'
  fig_diagram_scenarios2: 'NULL'
  # values_box_scenarios2: 'NULL'
  prop_diagnosed_scenarios2: 'NULL' 
  cost_per_true_pos_scenarios2: 'NULL'
  plot_ppv_scenarios2: 'NULL'
  plot_npv_scenarios2: 'NULL'
  plot_cpc_scenarios2: 'NULL'
  fig_diagram_scenarios3: 'NULL'
  prop_diagnosed_scenarios3: 'NULL' 
  cost_per_true_pos_scenarios3: 'NULL'
  # values_box_scenarios3: 'NULL'
  plot_ppv_scenarios3: 'NULL'
  plot_npv_scenarios3: 'NULL'
  plot_cpc_scenarios3: 'NULL'
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE)

library(htmltools)
library(DiagrammeR)
library(DiagrammeRsvg)

# Calculate column class based on the number of scenarios
num_scenarios <- sum(!is.null(params[["plot_ppv_scenarios1"]]), !is.null(params[["plot_ppv_scenarios2"]]), !is.null(params[["plot_ppv_scenarios3"]]))
# num_scenarios <- params[[num_scenarios]]
if (num_scenarios == 1) {
  column_class <- "col-md-12"
} else if (num_scenarios == 2) {
  column_class <- "col-md-6"
} else {
  column_class <- "col-md-4"
}


```

<div class="row">
```{r, results='asis'}

# "`r params$user_name`"


for (i in 1:num_scenarios) {
    scenario_name <- paste0("Scenario ", i)
    cat(paste0('<div class="', column_class, '">'))
    cat("\n", scenario_name, "\n")
    cat('<div style="text-align: center;">')

    # Print the plot directly as HTML
    print(params[[paste0("values_box_scenarios", i)]])
    print(params[[paste0("fig_diagram_scenarios", i)]])
    print(params[[paste0("plot_ppv_scenarios", i)]])
    print(params[[paste0("plot_npv_scenarios", i)]])
    print(params[[paste0("plot_cpc_scenarios", i)]])

    cat('</div>')
    cat("</div>")
}

#Iterate over scenarios and generate columns
# for (i in 1:params$num_scenarios) {
# for (i in 1:num_scenarios) {
#     scenario_name <- paste0("Scenario ", i)

#     cat(paste0('<div class="', column_class, '">'))
#     cat("\n", scenario_name, "\n")
#     cat("\n```{r, results='asis'}\n")#results='asis'

    # cat('<div style="text-align: center;">')
    # print(params[["plot_ppv_scenarios1"]])
    # cat('</div>')
    # cat(params[[val1]])

    
    
    #   cat('<div style="text-align: center;">')
    #   print(params[[paste0("plot_ppv_scenarios", i)]])
    # cat('</div>')

    
#     cat("\n```\n")
#     cat("</div>")
# }

# cat('<div style="text-align: center;">')
# print(params[["plot_ppv_scenarios1"]])
# cat('</div>')
```
</div>



<!-- <div class="row"> -->
<!--   <div class=`column_class`> -->
<!--   Scenario 1 -->
<!--     ```{r} -->
<!--     num_scenarios -->
<!--     column_class -->
<!--     params[["sensitivity_scenario1"]] -->
<!--     params[["specificity_scenario1"]] -->
<!--     ``` -->
<!--   </div> -->

<!--   <!-- <div class="col-md-4"> --> 
<!--    <div class=`column_class`> -->
<!--    Scenario 2 -->
<!--     ```{r} -->
<!--     params[["sensitivity_scenario2"]] -->
<!--     params[["specificity_scenario2"]] -->
<!--     ``` -->
<!--   </div> -->
<!--   <div class=`column_class`> -->
<!--    <!-- <div class="col-md-4"> --> 
<!--    Scenario 3 -->
<!--     ```{r} -->
<!--     params[["sensitivity_scenario3"]] -->
<!--     params[["specificity_scenario3"]] -->
<!--     ``` -->
<!--   </div> -->
<!-- </div> -->
  
  
  
  
  

<!-- # ```{r, results='asis'} -->
<!-- # cat('<div style="text-align: center;">') -->
<!-- # print(params[["scatterplot_plot"]]) -->
<!-- # cat('</div>') -->
<!-- # -->
<!-- # # params[["scatterplot_plot"]] -->
<!-- # ``` -->


